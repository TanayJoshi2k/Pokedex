{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Prashant Joshi/pokemon/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/Prashant Joshi/pokemon/node_modules/@babel/runtime/helpers/esm/slicedToArray\";//Import Axios and React\nimport axios from\"axios\";import React,{useState,useEffect}from\"react\";// Import CSS\nimport classes from\"../Pokemon/pokemon.module.css\";// Import Components\nimport Navbar from\"../Navbar/Navbar\";import Search from\"../Search/Search\";import Modal from\"../Modal/Modal\";import PokemonCard from\"../PokemonCard/PokemonCard\";import SearchPokemonCard from\"../SearchPokemonCard/SearchPokemonCard\";import Spinner from\"../Spinner/Spinner\";import Footer from\"../Footer/Footer\";import Gradients from\"../Gradients/Gradients\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PokemonLazyLoad=function PokemonLazyLoad(){var baseURL=\"https://pokeapi.co/api/v2/pokemon/\";var _useState=useState(0),_useState2=_slicedToArray(_useState,2),offset=_useState2[0],setOffset=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),pokemons=_useState4[0],setPokemons=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),searchPokemon=_useState6[0],setSearchPokemon=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),searchPokemonData=_useState8[0],setSearchPokemonData=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),selectedPokemonData=_useState10[0],setSelectedPokemonData=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),modal=_useState12[0],setModal=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isFetching=_useState14[0],setIsFetching=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),searching=_useState16[0],setSearching=_useState16[1];var getSearchPokemon=function getSearchPokemon(e){if(e.key===\"Enter\"&&e.target.value!=\"\"){setSearching(true);e.preventDefault();axios.get(\"https://pokeapi.co/api/v2/pokemon/\".concat(searchPokemon.toLowerCase())).then(function(res){setSearchPokemonData(res.data);setSearching(false);}).catch(function(){return console.log(\"No matching pokemon found!\");});}};var getPosts=function getPosts(offset,limit){axios.get(baseURL+\"?offset=\".concat(offset,\"&limit=\").concat(limit-offset)).then(function(res){var requests=res.data.results.map(function(pokemon){return axios.get(pokemon.url);});return Promise.all(requests).then(function(data){setPokemons([].concat(_toConsumableArray(pokemons),_toConsumableArray(data)));setIsFetching(false);});}).catch(function(err){return console.log(err);});};var getMorePosts=function getMorePosts(){getPosts(offset,offset+10);};var handleScroll=function handleScroll(){if(window.innerHeight+window.pageYOffset>=document.body.offsetHeight-100){setOffset(function(prevOffset){return prevOffset+10;});setIsFetching(true);}};useEffect(function(){window.addEventListener(\"scroll\",handleScroll);return function(){return window.removeEventListener(\"scroll\",handleScroll);};},[]);useEffect(function(){window.addEventListener(\"touchmove\",handleScroll);return function(){return window.removeEventListener(\"scroll\",handleScroll);};},[]);useEffect(function(){getPosts(offset,offset+10);},[]);useEffect(function(){if(!isFetching)return;else getMorePosts();},[isFetching]);var toggleModalHandler=function toggleModalHandler(isSet){setSelectedPokemonData({name:arguments.length<=1?undefined:arguments[1],imageURL:arguments.length<=2?undefined:arguments[2],backgroundColor:arguments.length<=3?undefined:arguments[3],abilities:arguments.length<=4?undefined:arguments[4],stats:arguments.length<=5?undefined:arguments[5],height:arguments.length<=6?undefined:arguments[6],weight:arguments.length<=7?undefined:arguments[7],types:arguments.length<=8?undefined:arguments[8]});setModal(isSet);};if(searching){return/*#__PURE__*/_jsx(Spinner,{});}if(Object.keys(searchPokemonData).length!==0){var color;if(searchPokemonData.types.length===2){color=Gradients(searchPokemonData.types[0].type.name,searchPokemonData.types[1].type.name,searchPokemonData.types.length);}else{color=Gradients(searchPokemonData.types[0].type.name,searchPokemonData.types[0].type.name,searchPokemonData.types.length);}return/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100vw\",height:\"100vh\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},children:[!modal&&/*#__PURE__*/_jsx(\"div\",{className:classes.searchPokemonContainer,children:/*#__PURE__*/_jsx(SearchPokemonCard,{toggleModal:toggleModalHandler,backgroundColor:color,name:searchPokemonData.name,pokemonImage:searchPokemonData.sprites.front_default,abilities:searchPokemonData.abilities,stats:searchPokemonData.stats,height:searchPokemonData.height,weight:searchPokemonData.weight,types:searchPokemonData.types})}),modal&&/*#__PURE__*/_jsx(Modal,{toggleModal:toggleModalHandler,backgroundColor:color,name:searchPokemonData.name,pokemonImage:searchPokemonData.sprites.front_default,abilities:searchPokemonData.abilities,stats:searchPokemonData.stats,height:searchPokemonData.height,weight:searchPokemonData.weight,types:searchPokemonData.types})]});}return/*#__PURE__*/_jsxs(\"div\",{children:[!modal&&/*#__PURE__*/_jsx(Navbar,{}),!modal&&/*#__PURE__*/_jsx(Search,{searchPokemon:setSearchPokemon,getSearchPokemon:getSearchPokemon}),!modal&&/*#__PURE__*/ //if searching==false, render the pokemon container. else none\n_jsx(\"div\",{className:classes.pokemonContainer,children:!modal&&pokemons.flat().map(function(record,i){var color=Gradients(record.data.types);if(record.data.types.length===2){color=Gradients(record.data.types[0].type.name,record.data.types[1].type.name,record.data.types.length);}else{color=Gradients(record.data.types[0].type.name,record.data.types[0].type.name,record.data.types.length);}return/*#__PURE__*/_jsx(PokemonCard,{toggleModal:function toggleModal(){return toggleModalHandler(true,record.data.name,record.data.sprites.front_default,color,record.data.abilities,record.data.stats,record.data.height,record.data.weight,record.data.types);},types:record.data.types,name:record.data.name,image:record.data.sprites.front_default});})}),modal&&/*#__PURE__*/_jsx(Modal,{toggleModal:toggleModalHandler,backgroundColor:selectedPokemonData[\"backgroundColor\"],name:selectedPokemonData[\"name\"],pokemonImage:selectedPokemonData[\"imageURL\"],abilities:selectedPokemonData[\"abilities\"],stats:selectedPokemonData[\"stats\"],height:selectedPokemonData[\"height\"],weight:selectedPokemonData[\"weight\"],types:selectedPokemonData[\"types\"]}),!modal&&/*#__PURE__*/_jsx(Footer,{modal:modal})]});};export default PokemonLazyLoad;","map":{"version":3,"sources":["C:/Users/Prashant Joshi/pokemon/src/PokemonLazyLoad/PokemonLazyLoad.js"],"names":["axios","React","useState","useEffect","classes","Navbar","Search","Modal","PokemonCard","SearchPokemonCard","Spinner","Footer","Gradients","PokemonLazyLoad","baseURL","offset","setOffset","pokemons","setPokemons","searchPokemon","setSearchPokemon","searchPokemonData","setSearchPokemonData","selectedPokemonData","setSelectedPokemonData","modal","setModal","isFetching","setIsFetching","searching","setSearching","getSearchPokemon","e","key","target","value","preventDefault","get","toLowerCase","then","res","data","catch","console","log","getPosts","limit","requests","results","map","pokemon","url","Promise","all","err","getMorePosts","handleScroll","window","innerHeight","pageYOffset","document","body","offsetHeight","prevOffset","addEventListener","removeEventListener","toggleModalHandler","isSet","name","imageURL","backgroundColor","abilities","stats","height","weight","types","Object","keys","length","color","type","width","display","justifyContent","alignItems","searchPokemonContainer","sprites","front_default","pokemonContainer","flat","record","i"],"mappings":"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","sourcesContent":["//Import Axios and React\r\n\r\nimport axios from \"axios\";\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\n// Import CSS\r\nimport classes from \"../Pokemon/pokemon.module.css\";\r\n\r\n// Import Components\r\nimport Navbar from \"../Navbar/Navbar\";\r\nimport Search from \"../Search/Search\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport PokemonCard from \"../PokemonCard/PokemonCard\";\r\nimport SearchPokemonCard from \"../SearchPokemonCard/SearchPokemonCard\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport Footer from \"../Footer/Footer\";\r\nimport Gradients from \"../Gradients/Gradients\";\r\n\r\nconst PokemonLazyLoad = () => {\r\n  const baseURL = \"https://pokeapi.co/api/v2/pokemon/\";\r\n  const [offset, setOffset] = useState(0);\r\n  const [pokemons, setPokemons] = useState([]);\r\n  const [searchPokemon, setSearchPokemon] = useState(\"\");\r\n  const [searchPokemonData, setSearchPokemonData] = useState({});\r\n  const [selectedPokemonData, setSelectedPokemonData] = useState({});\r\n  const [modal, setModal] = useState(false);\r\n  const [isFetching, setIsFetching] = useState(false);\r\n  const [searching, setSearching] = useState(false);\r\n\r\n  const getSearchPokemon = (e) => {\r\n    if (e.key === \"Enter\" && e.target.value != \"\") {\r\n      setSearching(true);\r\n      e.preventDefault();\r\n      axios\r\n        .get(`https://pokeapi.co/api/v2/pokemon/${searchPokemon.toLowerCase()}`)\r\n        .then((res) => {\r\n          setSearchPokemonData(res.data);\r\n          setSearching(false);\r\n        })\r\n        .catch(() => console.log(\"No matching pokemon found!\"));\r\n    }\r\n  };\r\n\r\n  const getPosts = (offset, limit) => {\r\n    axios\r\n      .get(baseURL + `?offset=${offset}&limit=${limit - offset}`)\r\n      .then((res) => {\r\n        let requests = res.data.results.map((pokemon) => {\r\n          return axios.get(pokemon.url);\r\n        });\r\n        return Promise.all(requests).then((data) => {\r\n          setPokemons([...pokemons, ...data]);\r\n          setIsFetching(false);\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const getMorePosts = () => {\r\n    getPosts(offset, offset + 10);\r\n  };\r\n\r\n  const handleScroll = () => {\r\n    if (\r\n      window.innerHeight + window.pageYOffset >=\r\n      document.body.offsetHeight - 100\r\n    ) {\r\n      setOffset((prevOffset) => prevOffset + 10);\r\n      setIsFetching(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => window.removeEventListener(\"scroll\", handleScroll);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"touchmove\", handleScroll);\r\n    return () => window.removeEventListener(\"scroll\", handleScroll);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    getPosts(offset, offset + 10);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!isFetching) return;\r\n    else getMorePosts();\r\n  }, [isFetching]);\r\n\r\n  const toggleModalHandler = (isSet, ...pokemonDetails) => {\r\n    setSelectedPokemonData({\r\n      name: pokemonDetails[0],\r\n      imageURL: pokemonDetails[1],\r\n      backgroundColor: pokemonDetails[2],\r\n      abilities: pokemonDetails[3],\r\n      stats: pokemonDetails[4],\r\n      height: pokemonDetails[5],\r\n      weight: pokemonDetails[6],\r\n      types: pokemonDetails[7],\r\n    });\r\n    setModal(isSet);\r\n  };\r\n\r\n  if (searching) {\r\n    return <Spinner />;\r\n  }\r\n\r\n  if (Object.keys(searchPokemonData).length !== 0) {\r\n    let color;\r\n    if (searchPokemonData.types.length === 2) {\r\n      color = Gradients(\r\n        searchPokemonData.types[0].type.name,\r\n        searchPokemonData.types[1].type.name,\r\n        searchPokemonData.types.length\r\n      );\r\n    } else {\r\n      color = Gradients(\r\n        searchPokemonData.types[0].type.name,\r\n        searchPokemonData.types[0].type.name,\r\n        searchPokemonData.types.length\r\n      );\r\n    }\r\n    return (\r\n      <div\r\n        style={{\r\n          width: \"100vw\",\r\n          height: \"100vh\",\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        {!modal && (\r\n          <div className={classes.searchPokemonContainer}>\r\n            <SearchPokemonCard\r\n              toggleModal={toggleModalHandler}\r\n              backgroundColor={color}\r\n              name={searchPokemonData.name}\r\n              pokemonImage={searchPokemonData.sprites.front_default}\r\n              abilities={searchPokemonData.abilities}\r\n              stats={searchPokemonData.stats}\r\n              height={searchPokemonData.height}\r\n              weight={searchPokemonData.weight}\r\n              types={searchPokemonData.types}\r\n            />\r\n          </div>\r\n        )}\r\n        {modal && (\r\n          <Modal\r\n            toggleModal={toggleModalHandler}\r\n            backgroundColor={color}\r\n            name={searchPokemonData.name}\r\n            pokemonImage={searchPokemonData.sprites.front_default}\r\n            abilities={searchPokemonData.abilities}\r\n            stats={searchPokemonData.stats}\r\n            height={searchPokemonData.height}\r\n            weight={searchPokemonData.weight}\r\n            types={searchPokemonData.types}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {!modal && <Navbar />}\r\n      {!modal && (\r\n        <Search\r\n          searchPokemon={setSearchPokemon}\r\n          getSearchPokemon={getSearchPokemon}\r\n        />\r\n      )}\r\n      {!modal && ( //if searching==false, render the pokemon container. else none\r\n        <div className={classes.pokemonContainer}>\r\n          {!modal &&\r\n            pokemons.flat().map((record, i) => {\r\n              let color = Gradients(record.data.types);\r\n              if (record.data.types.length === 2) {\r\n                color = Gradients(\r\n                  record.data.types[0].type.name,\r\n                  record.data.types[1].type.name,\r\n                  record.data.types.length\r\n                );\r\n              } else {\r\n                color = Gradients(\r\n                  record.data.types[0].type.name,\r\n                  record.data.types[0].type.name,\r\n                  record.data.types.length\r\n                );\r\n              }\r\n\r\n              return (\r\n                <PokemonCard\r\n                  toggleModal={() =>\r\n                    toggleModalHandler(\r\n                      true,\r\n                      record.data.name,\r\n                      record.data.sprites.front_default,\r\n                      color,\r\n                      record.data.abilities,\r\n                      record.data.stats,\r\n                      record.data.height,\r\n                      record.data.weight,\r\n                      record.data.types\r\n                    )\r\n                  }\r\n                  types={record.data.types}\r\n                  name={record.data.name}\r\n                  image={record.data.sprites.front_default}\r\n                />\r\n              );\r\n            })}\r\n        </div>\r\n      )}\r\n\r\n      {modal && (\r\n        <Modal\r\n          toggleModal={toggleModalHandler}\r\n          backgroundColor={selectedPokemonData[\"backgroundColor\"]}\r\n          name={selectedPokemonData[\"name\"]}\r\n          pokemonImage={selectedPokemonData[\"imageURL\"]}\r\n          abilities={selectedPokemonData[\"abilities\"]}\r\n          stats={selectedPokemonData[\"stats\"]}\r\n          height={selectedPokemonData[\"height\"]}\r\n          weight={selectedPokemonData[\"weight\"]}\r\n          types={selectedPokemonData[\"types\"]}\r\n        />\r\n      )}\r\n\r\n      {!modal && <Footer modal={modal} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PokemonLazyLoad;\r\n"]},"metadata":{},"sourceType":"module"}